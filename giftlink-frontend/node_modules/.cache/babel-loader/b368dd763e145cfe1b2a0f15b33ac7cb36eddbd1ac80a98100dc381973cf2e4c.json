{"ast":null,"code":"var _jsxFileName = \"D:\\\\develop\\\\project\\\\fullstack-capstone\\\\giftlink-frontend\\\\src\\\\components\\\\Profile\\\\Profile.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport './Profile.css';\nimport { urlConfig } from '../../config';\nimport { useAppContext } from '../../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profile = () => {\n  _s();\n  const [userDetails, setUserDetails] = useState({});\n  const [updatedDetails, setUpdatedDetails] = useState({});\n  const {\n    setUserName\n  } = useAppContext();\n  const [changed, setChanged] = useState(\"\");\n  const [editMode, setEditMode] = useState(false);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const authtoken = sessionStorage.getItem(\"auth-token\");\n    if (!authtoken) {\n      navigate(\"/app/login\");\n    } else {\n      fetchUserProfile();\n    }\n  }, [navigate]);\n  const fetchUserProfile = async () => {\n    try {\n      const authtoken = sessionStorage.getItem(\"auth-token\");\n      const email = sessionStorage.getItem(\"email\");\n      const name = sessionStorage.getItem('name');\n      if (name || authtoken) {\n        const storedUserDetails = {\n          name: name,\n          email: email\n        };\n        setUserDetails(storedUserDetails);\n        setUpdatedDetails(storedUserDetails);\n      }\n    } catch (error) {\n      console.error(error);\n      // Handle error case\n    }\n  };\n  const handleEdit = () => {\n    setEditMode(true);\n  };\n  const handleInputChange = e => {\n    setUpdatedDetails({\n      ...updatedDetails,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const authtoken = sessionStorage.getItem(\"auth-token\");\n      const email = sessionStorage.getItem(\"email\");\n      if (!authtoken || !email) {\n        navigate(\"/app/login\");\n        return;\n      }\n      const payload = {\n        ...updatedDetails\n      };\n      const response = await fetch(`${urlConfig.backendUrl}/api/auth/update`, {\n        //Step 1: Task 1\n        method: 'PUT',\n        //Step 1: Task 2\n        headers: {\n          \"Authorization\": `Bearer ${authtoken}`,\n          \"Content-Type\": \"application/json\",\n          \"Email\": email\n        },\n        //Step 1: Task 3\n        body: JSON.stringify(payload)\n      });\n      if (response.ok) {\n        // Update the user details in session storage\n        //Step 1: Task 4\n        setUserName(updatedDetails.name);\n        //Step 1: Task 5\n        sessionStorage.setItem(\"name\", updatedDetails.name);\n        setUserDetails(updatedDetails);\n        setEditMode(false);\n        // Display success message to the user\n        setChanged(\"Name Changed Successfully!\");\n        setTimeout(() => {\n          setChanged(\"\");\n          navigate(\"/\");\n        }, 1000);\n      } else {\n        // Handle error case\n        throw new Error(\"Failed to update profile\");\n      }\n    } catch (error) {\n      console.error(error);\n      // Handle error case\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-container\",\n    children: editMode ? /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Email\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          name: \"email\",\n          value: userDetails.email,\n          disabled: true // Disable the email field\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Name\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"name\",\n          value: updatedDetails.name,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-details\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Hi, \", userDetails.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 25\n        }, this), \" \", userDetails.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleEdit,\n        children: \"Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: 'green',\n          height: '.5cm',\n          display: 'block',\n          fontStyle: 'italic',\n          fontSize: '12px'\n        },\n        children: changed\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 9\n  }, this);\n};\n_s(Profile, \"yPJuUnC++iSWk7+sTi9Zo/3yJgs=\", false, function () {\n  return [useAppContext, useNavigate];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","urlConfig","useAppContext","jsxDEV","_jsxDEV","Profile","_s","userDetails","setUserDetails","updatedDetails","setUpdatedDetails","setUserName","changed","setChanged","editMode","setEditMode","navigate","authtoken","sessionStorage","getItem","fetchUserProfile","email","name","storedUserDetails","error","console","handleEdit","handleInputChange","e","target","value","handleSubmit","preventDefault","payload","response","fetch","backendUrl","method","headers","body","JSON","stringify","ok","setItem","setTimeout","Error","className","children","onSubmit","type","disabled","fileName","_jsxFileName","lineNumber","columnNumber","onChange","onClick","style","color","height","display","fontStyle","fontSize","_c","$RefreshReg$"],"sources":["D:/develop/project/fullstack-capstone/giftlink-frontend/src/components/Profile/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport './Profile.css'\r\nimport { urlConfig } from '../../config';\r\nimport { useAppContext } from '../../context/AuthContext';\r\n\r\nconst Profile = () => {\r\n    const [userDetails, setUserDetails] = useState({});\r\n    const [updatedDetails, setUpdatedDetails] = useState({});\r\n    const { setUserName } = useAppContext();\r\n    const [changed, setChanged] = useState(\"\");\r\n\r\n    const [editMode, setEditMode] = useState(false);\r\n    const navigate = useNavigate();\r\n    useEffect(() => {\r\n        const authtoken = sessionStorage.getItem(\"auth-token\");\r\n        if (!authtoken) {\r\n            navigate(\"/app/login\");\r\n        } else {\r\n            fetchUserProfile();\r\n        }\r\n    }, [navigate]);\r\n\r\n    const fetchUserProfile = async () => {\r\n        try {\r\n            const authtoken = sessionStorage.getItem(\"auth-token\");\r\n            const email = sessionStorage.getItem(\"email\");\r\n            const name = sessionStorage.getItem('name');\r\n            if (name || authtoken) {\r\n                const storedUserDetails = {\r\n                    name: name,\r\n                    email: email\r\n                };\r\n\r\n                setUserDetails(storedUserDetails);\r\n                setUpdatedDetails(storedUserDetails);\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n            // Handle error case\r\n        }\r\n    };\r\n\r\n    const handleEdit = () => {\r\n        setEditMode(true);\r\n    };\r\n\r\n    const handleInputChange = (e) => {\r\n        setUpdatedDetails({\r\n            ...updatedDetails,\r\n            [e.target.name]: e.target.value,\r\n        });\r\n    };\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        try {\r\n            const authtoken = sessionStorage.getItem(\"auth-token\");\r\n            const email = sessionStorage.getItem(\"email\");\r\n\r\n            if (!authtoken || !email) {\r\n                navigate(\"/app/login\");\r\n                return;\r\n            }\r\n\r\n            const payload = { ...updatedDetails };\r\n            const response = await fetch(`${urlConfig.backendUrl}/api/auth/update`, {\r\n                //Step 1: Task 1\r\n                method: 'PUT',\r\n                //Step 1: Task 2\r\n                headers: {\r\n                    \"Authorization\": `Bearer ${authtoken}`,\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Email\": email,\r\n                },\r\n                //Step 1: Task 3\r\n                body: JSON.stringify(payload),\r\n            });\r\n\r\n            if (response.ok) {\r\n                // Update the user details in session storage\r\n                //Step 1: Task 4\r\n                setUserName(updatedDetails.name);\r\n                //Step 1: Task 5\r\n                sessionStorage.setItem(\"name\", updatedDetails.name);\r\n                setUserDetails(updatedDetails);\r\n                setEditMode(false);\r\n                // Display success message to the user\r\n                setChanged(\"Name Changed Successfully!\");\r\n                setTimeout(() => {\r\n                    setChanged(\"\");\r\n                    navigate(\"/\");\r\n                }, 1000);\r\n\r\n            } else {\r\n                // Handle error case\r\n                throw new Error(\"Failed to update profile\");\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n            // Handle error case\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"profile-container\">\r\n            {editMode ? (\r\n                <form onSubmit={handleSubmit}>\r\n                    <label>\r\n                        Email\r\n                        <input\r\n                            type=\"email\"\r\n                            name=\"email\"\r\n                            value={userDetails.email}\r\n                            disabled // Disable the email field\r\n                        />\r\n                    </label>\r\n                    <label>\r\n                        Name\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"name\"\r\n                            value={updatedDetails.name}\r\n                            onChange={handleInputChange}\r\n                        />\r\n                    </label>\r\n\r\n                    <button type=\"submit\">Save</button>\r\n                </form>\r\n            ) : (\r\n                <div className=\"profile-details\">\r\n                    <h1>Hi, {userDetails.name}</h1>\r\n                    <p> <b>Email:</b> {userDetails.email}</p>\r\n                    <button onClick={handleEdit}>Edit</button>\r\n                    <span style={{ color: 'green', height: '.5cm', display: 'block', fontStyle: 'italic', fontSize: '12px' }}>{changed}</span>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Profile;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}